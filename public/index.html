<!doctype html>
<html>
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Week 2 Project</title>
<style>body{font-family:system-ui, sans-serif;max-width:820px;margin:2rem auto;padding:0 1rem}</style>
</head>
<body>
<h1>Starter App</h1>
<p>Use the feature branches to add login form, DB module, and REST API.</p>
<div id="login"></div>
<script>
// Placeholder UI; feature/user-authentication will replace this.
const root = document.getElementById('login');
root.innerHTML = `
<form id="loginForm">
<label>Email <input name="email" type="email" required value="demo@example.com"></label>
<label>Password <input name="password" type="password" required value="pass123"></label>
<button type="submit">Login</button>
</form>
<pre id="out"></pre>
`;
document.getElementById('loginForm').addEventListener('submit', async (e)=>{
e.preventDefault();
const form = new FormData(e.target);
const res = await fetch('/auth/login', {
method: 'POST',
headers: { 'Content-Type': 'application/json' },
body: JSON.stringify({ email: form.get('email'), password: form.get('password') })
});
const data = await res.json();
document.getElementById('out').textContent = JSON.stringify(data, null, 2);
});
</script>
<script type="module">
import { validateEmail, login } from './auth.js';
const out = document.getElementById('out');
document.getElementById('loginForm').addEventListener('submit', async (e)=>{
e.preventDefault();
const form = new FormData(e.target);
const email = form.get('email');
const password = form.get('password');
if(!validateEmail(email)) { out.textContent = 'Invalid email format'; return; }
try { out.textContent = JSON.stringify(await login(email, password), null, 2); }
catch(err){ out.textContent = err.message; }
});
</script>
</body>
</html>